<template>
  <div class="app-content content ">
    <div class="content-overlay"></div>
    <div class="header-navbar-shadow"></div>
    <div class="content-wrapper">
      <div class="content-header row">
        <div class="content-header-left col-md-9 col-12 mb-2">
          <div class="row breadcrumbs-top">
            <div class="col-12">
              <h2 class="content-header-title float-left mb-0">–ì–ª–∞–≤–Ω–∞—è</h2>
              <div class="breadcrumb-wrapper">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a @click="$router.push('/')">–ì–ª–∞–≤–Ω–∞—è</a>
                  </li>
                  <li class="breadcrumb-item active">Dashboard
                  </li>
                </ol>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="content-body">
        <!-- Kick start -->
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">–ê–Ω–∞–ª–∏–∑ –ø–∏—Å—å–º–∞ –Ω–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ—Å—Ç—åüöÄ</h4>
          </div>
          <div class="card-body">
            <div class="card-text" style="display: flex;flex-direction: column;">
              <img src="../static/img/logo.png" style="height:120px;margin:auto"  alt="">
              <p>
                –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∏—Å—å–º–∞ –Ω–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ—Å—Ç—å –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø–æ–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –Ω–∞–∂–∞—Ç—å –Ω–∞
                –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å".<br>
                –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –±—É–¥–µ—Ç –±–∏–Ω–∞—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 1\0 –∏ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è (0-100%). –ß—Ç–æ
                —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç: 1-–≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–µ, 0-–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ.
              </p>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12 col-12">
              <div class="card" v-if="!is_auth">
                <div class="card-header">
                  <h4 class="card-title" style="color:#d90000">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å</h4>
                </div>
              </div>
              <div class="card" v-else>
                <div class="card-header">
                  <h4 class="card-title">–§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∏—Å—å–º–∞</h4>
                </div>
                <div class="card-body">
                  <form class="form form-vertical">
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          <label for="first-name-icon">From</label>
                          <div class="input-group input-group-merge">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                  height="14" viewBox="0 0 24 24" fill="none"
                                                                  stroke="currentColor" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round"
                                                                  class="feather feather-mail"><path
                                  d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline
                                  points="22,6 12,13 2,6"></polyline></svg></span>
                            </div>
                            <input type="email" v-model="form.from_email" id="first-name-icon" class="form-control"
                                   name="fname-icon"
                                   placeholder="–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å">
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label for="email-id-icon">To Email</label>
                          <div class="input-group input-group-merge">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                  height="14" viewBox="0 0 24 24" fill="none"
                                                                  stroke="currentColor" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round"
                                                                  class="feather feather-mail"><path
                                  d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline
                                  points="22,6 12,13 2,6"></polyline></svg></span>
                            </div>
                            <input type="email" v-model="form.to_email" id="email-id-icon" class="form-control"
                                   name="email-id-icon"
                                   placeholder="Email –ø–æ–ª—É—á–∞—Ç–µ–ª—è">
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label for="contact-info-icon">Date</label>
                          <div class="input-group input-group-merge">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                  height="14" viewBox="0 0 24 24" fill="none"
                                                                  stroke="currentColor" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round"
                                                                  class="feather file-text"><rect x="5" y="2" width="14"
                                                                                                  height="20" rx="2"
                                                                                                  ry="2"></rect><line
                                  x1="12" y1="18" x2="12.01" y2="18"></line></svg></span>
                            </div>
                            <input type="datetime-local" v-model="form.date" id="contact-info-icon" class="form-control"
                                   name="contact-icon"
                                   placeholder="–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏">
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label for="password-icon">Content-type</label>
                          <div class="input-group input-group-merge">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                  height="14" viewBox="0 0 24 24" fill="none"
                                                                  stroke="currentColor" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round"
                                                                  class="feather feather-lock"><rect x="3" y="11"
                                                                                                     width="18"
                                                                                                     height="11" rx="2"
                                                                                                     ry="2"></rect><path
                                  d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg></span>
                            </div>
                            <input type="password" v-model="form.content_type" id="password-icon" class="form-control"
                                   name="contact-icon"
                                   placeholder="–¢–∏–ø –ø–∏—Å—å–º–∞">
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label for="password-icon">X-UID</label>
                          <div class="input-group input-group-merge">
                            <div class="input-group-prepend">
                              <span class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="14"
                                                                  height="14" viewBox="0 0 24 24" fill="none"
                                                                  stroke="currentColor" stroke-width="2"
                                                                  stroke-linecap="round" stroke-linejoin="round"
                                                                  class="feather feather-lock"><rect x="3" y="11"
                                                                                                     width="18"
                                                                                                     height="11" rx="2"
                                                                                                     ry="2"></rect><path
                                  d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg></span>
                            </div>
                            <input type="password" v-model="form.x_uid" id="password-icon" class="form-control"
                                   name="contact-icon"
                                   placeholder="–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID">
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label for="exampleFormControlTextarea1">Body</label>
                          <textarea class="form-control" v-model="form.body" id="exampleFormControlTextarea1" rows="3"
                                    placeholder="–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∏—Å—å–º–∞"></textarea>
                        </div>
                      </div>
                      <div class="col-12">
                        <button type="reset" @click="createMessage(form)"
                                class="btn btn-primary mr-1 waves-effect waves-float waves-light">
                          –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                        </button>
                        <button type="reset" @click="clear" class="btn btn-outline-secondary waves-effect">–û—á–∏—Å—Ç–∏—Ç—å
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

        </div>
        <!--/ Kick start -->

        <!-- Page layout -->
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">–†–∞–∑–º–µ—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª—å—é –ø–∏—Å—å–º–∞ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞</h4>
          </div>
          <div class="card-body">
            <div class="card-text">
              <p>
                –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ–¥–µ–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞!
              </p>
            </div>

            <div class="table-responsive">
              <table class="table">
                <thead class="thead-dark">
                <tr>
                  <th>–°—Ç–∞—Ç—É—Å</th>
                  <th>–¢–æ—á–Ω–æ—Å—Ç—å</th>
                  <th>X-UID</th>
                  <th>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å</th>
                </tr>
                </thead>
                <tbody v-if="getEmails">
                <tr v-for="(email,i) in getEmails" :key="i">
                  <td><span
                      v-bind:class="{'badge-light-success':email.status!=='malevolent','badge-danger':email.status==='malevolent'}"
                      class="badge badge-pill  mr-1">{{ email.status === 'malevolent' ? '–í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π' : '–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π' }}</span>
                  </td>
                  <td>
                    {{ email.accuracy }}%
                  </td>
                  <td>
                    <span class="font-weight-bold">{{ email.x_uid }}</span>
                  </td>
                  <td>{{ email.from_email }}</td>
                </tr>
                </tbody>
              </table>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "Home",
  props: [
    'is_auth'
  ],
  data() {
    return {
      form: {
        from_email: "",
        to_email: "",
        date: "",
        content_type: "",
        x_uid: "",
        body: ""
      }
    }
  },
  methods: {
    ...mapActions(['createMessage','clearMessages']),
    clear: function () {
      this.form = {
        from_email: "",
        to_email: "",
        date: "",
        content_type: "",
        x_uid: "",
        body: ""
      }
    }
  },
  computed: {
    ...mapGetters(['getEmails']),
  },
  watch: {
    // eslint-disable-next-line no-unused-vars
    is_auth(newVal, oldVal) {
      if (!newVal) {
        this.clearMessages()
      }
    }
  }
}

import {mapActions, mapGetters} from "vuex";
</script>

<style scoped>

</style>